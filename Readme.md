# OBS ANT+ Heart Rate Monitor
> A small tool to display your heart rate in OBS using a ANT+ heart rate sensor.

## Motivation
When I was looking up existing solutions I found that they were either very limited to specific sensors or very convoluted by using a phone and a cloud service.\
This tool needs nothing more than absolutely needed, a sensor and a USB dongle, and should be compatible with every sensor with ANT+ support.

## Hardware
### USB Dongle
To be able to receive the sensor values a ANT+ USB dongle is needed.\
This tool was coded and tested with the official "Garmin ANT+ USB-Stick" (also known as "ANT USB-m Stick") but you can find a lot of different dongles in various online stores.
It was also testes with a cheap dongle "USB ANT STICK U1" from "CYCPLUS".\
As long as it registers with the VID 0x0FCF and the PID 0x1008 or 0x1009 it should work.
### Hear Rate Sensor
Every sensor that is ANT+ compatible should work. This tool was coded and tested with a cheap "H8 Heart Rate Monitor" from "COOSPO".

## Device Drivers
Use [Zadig](https://zadig.akeo.ie) to install the libusb-win32 driver for the device.\
The drivers I found online are all based on libusb-win32 but were outdated so using Zadig to install the latest version is probably the better option.

## Usage
### Tool Setup
At first the sensor id needs to be known. Start the tool and press the "Search for Sensor" button. In the newly opened window wait until a sensor is found, copy its id an close the window.\
Paste the id into the "Sensor ID" field. Configure the OSB Text Log if wanted and then press "Connect". If the Log feature is enabled a text file with the same name as the application will be written which contains the last received heart rate.\
The selected settings will be saved and loaded automatically.\
*Note: Setting the Sensor ID to 0 will connect to any sensor (wildcard id). However it should be a lot quicker to directly address the sensor with the correct id.*

### OBS Setup
Create a new "Text (GDI+)" source in the scene that should display the heart rate. In its configuration window select "Read from file" and select the log .txt file generated by the tool.

### Alternative setup using HTTP
Configure the sensor as normal, then instead of (or in addition to) enabling the log feature, enable the HTTP feature, which is slightly more flexible than the log approach and potentially gives slightly better performance.
This will launch a small HTTP server on your computer (not open to the outside world by default), which you can add into OBS as a Browser source. The URL to enter in OBS for the default settings is: `http://localhost:8888`

The first time you connect after enabling HTTP, the default HTML and JavaScript served by the HTTP server will be written to the current directory (usually where you started the application), with files having the same base name as the application.
You can edit these files (just make sure to preserve the `%...%` placeholders) and customize them however you like; the changes will become active the next time you connect to the sensor.
To restore the original files, just delete your versions and reconnect to the sensor.
